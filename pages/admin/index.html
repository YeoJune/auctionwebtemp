<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>관리자 대시보드</title>
    <link rel="stylesheet" href="/styles/common.css" />
    <link rel="stylesheet" href="/styles/admin/common.css" />
    <link rel="stylesheet" href="/styles/admin/admin.css" />
    <link rel="stylesheet" href="/styles/admin/unified.css" />
    <style>
      .ceo-cards {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 24px;
      }

      .ceo-card {
        background: var(--admin-card-bg);
        border-radius: var(--radius-lg);
        padding: 20px;
        border: 1px solid var(--admin-border);
        box-shadow: var(--shadow-card);
      }

      .ceo-card h3 {
        margin: 0 0 12px 0;
        color: var(--admin-text-secondary);
        font-size: 13px;
        font-weight: 500;
      }

      .ceo-value {
        font-size: 1.75rem;
        font-weight: 600;
        color: var(--accent-primary);
        letter-spacing: -0.02em;
      }

      .user-card {
        background: var(--admin-card-bg);
        border-radius: var(--radius-lg);
        padding: 20px;
        margin-bottom: 20px;
        border: 1px solid var(--admin-border);
        box-shadow: var(--shadow-card);
      }

      .user-card h3 {
        margin: 0 0 16px 0;
        color: var(--admin-text);
        font-size: 15px;
        font-weight: 600;
        padding-bottom: 12px;
        border-bottom: 1px solid var(--admin-border);
      }

      .active-user {
        display: flex;
        flex-direction: column;
        margin-bottom: 14px;
        padding-bottom: 14px;
        border-bottom: 1px solid var(--admin-border);
      }

      .active-user:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .user-id { font-weight: 600; margin-bottom: 6px; color: var(--admin-text); }
      .activity-stats { display: flex; flex-wrap: wrap; gap: 8px; font-size: 12px; color: var(--admin-text-secondary); }
      .ceo-period { margin-top: -4px; margin-bottom: 20px; color: var(--admin-text-secondary); font-size: 13px; }
      .vip-chart-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
      .risk-grid { display: block; margin-bottom: 20px; }
      .mini-period-note { margin-top: -4px; margin-bottom: 12px; font-size: 12px; color: var(--admin-text-secondary); }

      .bar-chart {
        display: flex;
        align-items: flex-end;
        gap: 8px;
        height: 200px;
        border-bottom: 1px solid var(--admin-border);
        padding: 0 4px 8px;
      }

      .bar-item { flex: 1; min-width: 0; text-align: center; }
      .bar { width: 100%; background: linear-gradient(180deg, rgba(0,113,227,0.4) 0%, var(--accent-primary) 100%); border-radius: 6px 6px 0 0; min-height: 4px; }
      .bar-label { margin-top: 8px; font-size: 11px; color: var(--admin-text-secondary); }
      .bar-value { margin-top: 4px; font-size: 11px; color: var(--admin-text-secondary); }

      .pending-wrap { overflow-x: auto; }
      .pending-table { width: 100%; border-collapse: collapse; font-size: 13px; }
      .pending-table th, .pending-table td { padding: 10px 12px; border-bottom: 1px solid var(--admin-border); text-align: left; }
      .pending-badge { display: inline-block; padding: 4px 10px; border-radius: 999px; font-size: 11px; font-weight: 600; color: #fff; background: var(--accent-danger); }

      @media (max-width: 1024px) {
        .ceo-cards, .vip-chart-grid { grid-template-columns: 1fr; }
      }

      .user-card > div::-webkit-scrollbar { width: 6px; }
      .user-card > div::-webkit-scrollbar-track { background: var(--admin-bg); }
      .user-card > div::-webkit-scrollbar-thumb { background: var(--admin-border-strong); border-radius: 6px; }
    </style>
  </head>
  <body>
    <div class="admin-layout">
      <!-- 사이드바 -->
      <div class="sidebar">
        <div class="sidebar-logo">
          <h2>경매 관리자</h2>
        </div>
        <div class="sidebar-menu">
          <a href="/admin" class="active">대시보드</a>
          <a href="/admin/live-bids">현장 경매 관리</a>
          <a href="/admin/direct-bids">직접 경매 관리</a>
          <a href="/admin/all-bids">통합 경매 관리</a>
          <a href="/admin/bid-results">입찰 결과 & 정산</a>
          <a href="/admin/transactions">거래 내역 관리</a>
          <a href="/admin/invoices">인보이스 관리</a>
          <a href="/admin/users">회원 관리</a>
          <a href="/admin/recommend-filters">추천 및 필터</a>
          <a href="/admin/settings">관리자 설정</a>
          <a href="/admin/wms">WMS(입고/수선/출고)</a>
          <a href="/admin/repair-management">수선 관리</a>
          <a href="/admin/activity-logs">사용자 활동기록</a>
          <a href="/admin/admin-permissions">관리자 권한 관리</a>
        </div>
      </div>

      <!-- 메인 콘텐츠 -->
      <div class="main-content">
        <div class="main-header">
          <h1>대시보드</h1>
          <div class="user-info" style="display: flex; align-items: center">
            <!-- 간단한 토글 버튼 -->
            <div class="admin-switch">
              <a href="#" class="active">경매 관리</a>
              <a href="https://cassystem.com/admin" class="inactive"
                >명품감정</a
              >
            </div>

            관리자
            <button id="logoutBtn" class="btn btn-secondary">로그아웃</button>
          </div>
        </div>

        <div class="ceo-cards">
          <div class="ceo-card">
            <h3>2026년 매출(관부가세포함/원)</h3>
            <div id="completedRevenueJpy" class="ceo-value">--</div>
          </div>
          <div class="ceo-card">
            <h3>당월 매출(관부가세포함/원)</h3>
            <div id="monthlyRevenueJpy" class="ceo-value">--</div>
          </div>
        </div>
        <div id="completedRevenuePeriod" class="ceo-period">기준: 데이터 불러오는 중...</div>

        <div class="vip-chart-grid">
          <div class="user-card">
            <h3>VIP 상위 고객 TOP 10 (최근 30일 매출 기준)</h3>
            <div id="vipTop5List">
              <div class="no-data">데이터를 불러오는 중입니다...</div>
            </div>
          </div>

          <div class="user-card">
            <h3>최근 6개월 매출(관부가세포함/원)</h3>
            <div id="sixMonthRevenueNote" class="mini-period-note">데이터를 불러오는 중입니다...</div>
            <div id="sixMonthRevenueChart" class="bar-chart"></div>
          </div>
        </div>

        <div class="risk-grid">
          <div class="user-card">
            <h3>완료됨 기준 국내도착 미반영 (날짜+경매장)</h3>
            <div id="pendingDomesticNote" class="mini-period-note">데이터를 불러오는 중입니다...</div>
            <div id="pendingDomesticList" class="pending-wrap">
              <div class="no-data">데이터를 불러오는 중입니다...</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 공통 스크립트 먼저 로드 -->
    <script src="/js/common.js"></script>
    <script src="/js/api.js"></script>

    <!-- Admin 전용 스크립트 -->
    <script src="/js/admin/common.js"></script>
    <script src="/js/admin/api.js"></script>
    <script src="/js/admin/dashboard.js"></script>
  </body>
</html>
