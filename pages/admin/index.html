<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>관리자 대시보드</title>
    <link rel="stylesheet" href="/styles/admin/common.css" />
    <style>
      /* 추가 스타일 */
      .kpi-cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 20px;
      }

      .kpi-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 15px;
      }

      .kpi-card h3 {
        margin-top: 0;
        color: #333;
        font-size: 16px;
        margin-bottom: 10px;
      }

      .kpi-value {
        font-size: 24px;
        font-weight: bold;
        color: #2c6ecb;
      }

      .auction-cards {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
        margin-bottom: 20px;
      }

      .auction-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 15px;
      }

      .auction-card h3 {
        margin-top: 0;
        color: #333;
        font-size: 16px;
        margin-bottom: 15px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
      }

      .auction-item {
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #f5f5f5;
      }

      .auction-item:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .item-title {
        font-weight: bold;
        margin-bottom: 5px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .item-meta {
        display: flex;
        justify-content: space-between;
        font-size: 13px;
      }

      .price {
        font-weight: bold;
        color: #2c6ecb;
      }

      .bid-status {
        color: #666;
      }

      .user-card {
        background-color: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        padding: 15px;
        margin-bottom: 20px;
      }

      .user-card h3 {
        margin-top: 0;
        color: #333;
        font-size: 16px;
        margin-bottom: 15px;
        border-bottom: 1px solid #eee;
        padding-bottom: 10px;
      }

      .active-user {
        display: flex;
        flex-direction: column;
        margin-bottom: 15px;
        padding-bottom: 15px;
        border-bottom: 1px solid #f5f5f5;
      }

      .active-user:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
      }

      .user-id {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .activity-stats {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        font-size: 12px;
        color: #666;
      }

      .no-data {
        text-align: center;
        padding: 20px;
        color: #999;
        font-style: italic;
      }

      .stats-container {
        display: flex;
        justify-content: space-around;
        padding: 20px 0;
      }

      .stats-item {
        text-align: center;
      }

      .stats-label {
        font-size: 14px;
        color: #666;
        margin-bottom: 5px;
      }

      .stats-value {
        font-size: 24px;
        font-weight: bold;
        color: #2c6ecb;
      }
    </style>
  </head>
  <body>
    <div class="admin-layout">
      <!-- 사이드바 -->
      <div class="sidebar">
        <div class="sidebar-logo">
          <h2>경매 관리자</h2>
        </div>
        <div class="sidebar-menu">
          <a href="/admin" class="active">대시보드</a>
          <a href="/admin/live-bids">현장 경매 관리</a>
          <a href="/admin/direct-bids">직접 경매 관리</a>
          <a href="/admin/invoices">인보이스 관리</a>
          <a href="/admin/users">회원 관리</a>
          <a href="/admin/settings">관리자 설정</a>
        </div>
      </div>

      <!-- 메인 콘텐츠 -->
      <div class="main-content">
        <div class="main-header">
          <h1>대시보드</h1>
          <div class="user-info">
            관리자
            <button id="logoutBtn" class="btn btn-secondary">로그아웃</button>
          </div>
        </div>

        <!-- 1. 비즈니스 핵심 지표 (KPI) -->
        <div class="kpi-cards">
          <div class="kpi-card">
            <h3>경매 성공률</h3>
            <div class="kpi-value" id="successRate">--%</div>
          </div>
          <div class="kpi-card">
            <h3>평균 입찰가</h3>
            <div class="kpi-value" id="avgBidPrice">--</div>
          </div>
          <div class="kpi-card">
            <h3>오늘의 입찰 수</h3>
            <div class="kpi-value" id="todayBids">--</div>
          </div>
        </div>

        <!-- 2. 활성 경매 현황 -->
        <div class="auction-cards">
          <div class="auction-card">
            <h3>활성 현장 경매</h3>
            <div id="liveAuctions">
              <div class="no-data">데이터를 불러오는 중입니다...</div>
            </div>
          </div>
          <div class="auction-card">
            <h3>활성 직접 경매</h3>
            <div id="directAuctions">
              <div class="no-data">데이터를 불러오는 중입니다...</div>
            </div>
          </div>
        </div>

        <!-- 3. 사용자 분석 -->
        <div class="user-card">
          <h3>최근 활동 사용자</h3>
          <div id="activeUsersList">
            <div class="no-data">데이터를 불러오는 중입니다...</div>
          </div>
        </div>

        <!-- 통계 정보 -->
        <div class="card">
          <div class="card-title">시스템 통계</div>
          <div class="stats-container">
            <div class="stats-item">
              <div class="stats-label">실시간 접속자</div>
              <div id="activeTotalUsers" class="stats-value">0</div>
            </div>
            <div class="stats-item">
              <div class="stats-label">오늘 방문자</div>
              <div id="dailyTotalUsers" class="stats-value">0</div>
            </div>
            <div class="stats-item">
              <div class="stats-label">총 요청 수</div>
              <div id="totalRequests" class="stats-value">0</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="/js/admin/common.js"></script>
    <script src="/js/admin/api.js"></script>
    <script src="/js/admin/dashboard.js"></script>
  </body>
</html>
