<!-- pages/appr/repair.html -->
<!-- 까사복원시스템 페이지 -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>까사복원시스템 - CAS 명품감정시스템</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Montserrat:wght@500;600;700&display=swap"
      rel="stylesheet" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans KR", sans-serif;
        color: #333;
        line-height: 1.6;
        background-color: #fff;
      }

      .container {
        width: 100%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
      }

      /* 헤더 & 푸터 공통 스타일 (다른 appr 페이지에서 가져옴) */
      header {
        background-color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      .header-inner {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 18px 0;
      }
      .logo {
        font-size: 1.6rem;
        font-weight: 700;
        color: #1a2a3a;
        text-decoration: none;
        letter-spacing: -0.5px;
      }
      .logo .cas-highlight {
        background: linear-gradient(135deg, #1a2a3a 0%, #2d4263 100%);
        -background-clip: text;
        -webkit-text-fill-color: transparent;
      }
      /* 반응형 그리드 설정 */

      @media (min-width: 768px) {
        .nav-desktop {
          display: flex !important;
        }
        .mobile-menu-btn {
          display: none !important;
        }
        .grid-3 {
          grid-template-columns: repeat(3, 1fr) !important;
        }
      }
      /* 모던 디자인 요소 */

      .btn-modern {
        padding: 14px 28px;
        border-radius: 8px;
        font-weight: 600;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        text-decoration: none;
      }

      .btn-modern:before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 0;
        height: 100%;
        background: rgba(255, 255, 255, 0.1);
        transition: all 0.3s ease;
        z-index: -1;
      }

      .btn-modern:hover:before {
        width: 100%;
      }
      /* 복원 서비스 카드 스타일 */

      .restoration-card {
        display: flex;
        flex-direction: column;
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        margin-bottom: 20px; /* 카드 간 간격 */
      }

      .restoration-images {
        display: flex;
        height: 200px; /* 이미지 높이 고정 */
        background-color: #f0f0f0; /* 이미지 로딩 전 배경색 */
      }

      .restoration-image {
        flex: 1;
        position: relative;
      }

      .restoration-image img {
        width: 100%;
        height: 100%;
        object-fit: cover; /* 이미지가 영역에 맞게 잘리거나 채워지도록 */
      }

      .restoration-image .image-label {
        /* 전/후 라벨 스타일 수정 */
        content: "";
        position: absolute;
        top: 10px;
        right: 10px;
        background-color: rgba(0, 0, 0, 0.6);
        color: #fff;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 0.8rem;
      }

      .restoration-details {
        padding: 20px; /* 내부 패딩 증가 */
      }

      .restoration-details h3 {
        font-size: 1.2rem; /* 제목 크기 증가 */
        font-weight: 600;
        margin-bottom: 10px;
        color: #1a2a3a;
      }

      .restoration-details p {
        color: #4a5568;
        margin-bottom: 8px; /* 문단 간격 조정 */
        font-size: 0.95rem; /* 본문 크기 증가 */
      }
      .restoration-details p.description {
        /* 설명 텍스트 스타일 */
        min-height: 50px; /* 설명 영역 최소 높이 확보 */
        line-height: 1.5;
      }
      #loading-services,
      #no-services {
        text-align: center;
        padding: 40px 20px;
        font-size: 1.1rem;
        color: #4a5568;
      }
    </style>
  </head>

  <body>
    <!-- 헤더 -->
    <header
      style="
        background-color: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
        position: sticky;
        top: 0;
        z-index: 1000;
      ">
      <div class="container">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 18px 0;
          ">
          <a
            href="/appr"
            class="logo"
            style="
              font-size: 1.6rem;
              font-weight: 700;
              color: #1a2a3a;
              text-decoration: none;
              letter-spacing: -0.5px;
            ">
            <span
              style="
                background: linear-gradient(135deg, #1a2a3a 0%, #2d4263 100%);
                -background-clip: text;
                -webkit-text-fill-color: transparent;
              "
              >CAS</span
            >
            명품감정시스템
          </a>

          <nav class="nav-desktop" style="display: none">
            <a
              href="/appr"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >홈</a
            >
            <a
              href="/appr/request"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >감정신청</a
            >
            <a
              href="/appr/result"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >감정번호조회</a
            >
            <a
              href="#"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >마이페이지</a
            >
            <a
              href="/appr/repair"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >까사복원시스템</a
            >
            <a
              href="/appr/authenticity"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >정가품구별법</a
            >
            <a
              href="/appr/signin"
              class="btn-modern"
              style="margin-left: 30px; color: #4a5568"
              >로그인</a
            >
          </nav>
          <button
            class="mobile-menu-btn"
            id="menu-icon"
            onclick="toggleMobileMenu()"
            style="
              background: none;
              border: none;
              font-size: 1.5rem;
              cursor: pointer;
              display: block; /* JS로 제어 */
            ">
            ☰
          </button>
        </div>
      </div>
    </header>

    <div
      class="mobile-menu"
      id="mobile-menu"
      style="
        display: none; /* JS로 제어 */
        position: fixed;
        top: 70px; /* 헤더 높이에 따라 조정 */
        left: 0;
        right: 0;
        background-color: #fff;
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        z-index: 999;
      ">
      <a
        href="/appr"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
          border-bottom: 1px solid #e2e8f0;
        "
        >홈</a
      >
      <a
        href="/appr/request"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
          border-bottom: 1px solid #e2e8f0;
        "
        >감정신청</a
      >
      <a
        href="/appr/result"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
          border-bottom: 1px solid #e2e8f0;
        "
        >감정번호조회</a
      >
      <a
        href="#"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
          border-bottom: 1px solid #e2e8f0;
        "
        >마이페이지</a
      >
      <a
        href="/appr/repair"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
          border-bottom: 1px solid #e2e8f0;
        "
        >까사복원시스템</a
      >
      <a
        href="/appr/authenticity"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
          border-bottom: 1px solid #e2e8f0;
        "
        >정가품구별법</a
      >
      <a
        href="/appr/signin"
        style="
          display: block;
          padding: 15px 20px;
          color: #4a5568;
          text-decoration: none;
        "
        >로그인</a
      >
    </div>

    <!-- 메인 콘텐츠 영역 -->
    <main>
      <section style="padding: 80px 0; background-color: #f8fafc">
        <div
          class="container"
          style="max-width: 1200px; margin: 0 auto; padding: 0 20px">
          <h1
            style="
              font-size: 2.5rem;
              font-weight: 700;
              color: #1a2a3a;
              margin-bottom: 50px;
              text-align: center;
            ">
            까사복원시스템
          </h1>

          <p
            style="
              color: #4a5568;
              font-size: 1.1rem;
              line-height: 1.7;
              text-align: center;
              max-width: 800px;
              margin: 0 auto 50px;
            ">
            명품의 가치를 오래도록 지키기 위한 전문 복원 서비스를 제공합니다.<br />
            아래에서 복원 항목별 비용과 예상 소요일을 확인하세요.
          </p>

          <!-- 복원 서비스 그리드 -->
          <div
            id="restoration-services-grid"
            style="
              display: grid;
              grid-template-columns: repeat(1, 1fr); /* 모바일 기본 1열 */
              gap: 30px;
              margin-bottom: 50px;
            ">
            <!-- 서비스 카드가 여기에 동적으로 추가됩니다. -->
            <p id="loading-services">복원 서비스 목록을 불러오는 중...</p>
            <p id="no-services" style="display: none">
              현재 제공 가능한 복원 서비스가 없습니다.
            </p>
          </div>

          <div style="text-align: center; margin-top: 30px">
            <a
              href="/appr/result"
              class="btn-modern"
              style="
                display: inline-block;
                background-color: #1a2a3a;
                color: #fff;
                padding: 15px 30px;
                border-radius: 8px;
                font-weight: 600;
                transition: all 0.3s;
              ">
              감정 후 복원 서비스 신청하기
            </a>
          </div>
        </div>
      </section>
    </main>

    <!-- 푸터 -->
    <footer
      style="background-color: #1a2a3a; color: #fff; padding: 40px 0 20px">
      <div class="container">
        <div
          style="
            display: grid;
            grid-template-columns: repeat(1, 1fr);
            gap: 30px;
            margin-bottom: 30px;
          "
          class="grid-3">
          <div>
            <h3
              style="font-size: 1.25rem; font-weight: 700; margin-bottom: 15px">
              <span style="font-size: 0.9rem; vertical-align: top">ⓒ</span> CAS
              명품감정시스템
            </h3>
            <p style="color: #cbd5e0; margin-bottom: 20px">
              최고의 전문가들이 함께하는<br />
              국내 최고 명품 감정 서비스
            </p>
          </div>

          <div>
            <h3
              style="font-size: 1.1rem; font-weight: 700; margin-bottom: 15px">
              서비스
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0">
              <li style="margin-bottom: 10px">
                <a
                  href="/appr/request"
                  style="color: #cbd5e0; text-decoration: none"
                  >감정 신청</a
                >
              </li>
              <li style="margin-bottom: 10px">
                <a
                  href="/appr/result"
                  style="color: #cbd5e0; text-decoration: none"
                  >감정서 조회</a
                >
              </li>
              <li style="margin-bottom: 10px">
                <a
                  href="/appr/repair"
                  style="color: #cbd5e0; text-decoration: none"
                  >까사복원시스템</a
                >
              </li>
              <li style="margin-bottom: 10px">
                <a
                  href="/appr/authenticity"
                  style="color: #cbd5e0; text-decoration: none"
                  >정가품구별법</a
                >
              </li>
              <li>
                <a href="#" style="color: #cbd5e0; text-decoration: none"
                  >마이페이지</a
                >
              </li>
            </ul>
          </div>

          <div>
            <h3
              style="font-size: 1.1rem; font-weight: 700; margin-bottom: 15px">
              정보
            </h3>
            <ul style="list-style: none; padding: 0; margin: 0">
              <li style="margin-bottom: 10px">
                <a href="#" style="color: #cbd5e0; text-decoration: none"
                  >회사 소개</a
                >
              </li>
              <li style="margin-bottom: 10px">
                <a href="#" style="color: #cbd5e0; text-decoration: none"
                  >이용약관</a
                >
              </li>
              <li>
                <a href="#" style="color: #cbd5e0; text-decoration: none"
                  >개인정보처리방침</a
                >
              </li>
            </ul>
          </div>
        </div>

        <div
          style="
            border-top: 1px solid #2d3748;
            padding-top: 20px;
            text-align: center;
            color: #a0aec0;
            font-size: 0.875rem;
          ">
          <p>© 2025 CAS 명품감정시스템. All rights reserved.</p>
        </div>
      </div>
    </footer>

    <script>
      function toggleMobileMenu() {
        const mobileMenu = document.getElementById("mobile-menu");
        const menuIcon = document.getElementById("menu-icon");
        if (mobileMenu.style.display === "block") {
          mobileMenu.style.display = "none";
          if (menuIcon) menuIcon.textContent = "☰";
        } else {
          mobileMenu.style.display = "block";
          if (menuIcon) menuIcon.textContent = "✕";
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        const mobileMenuButton = document.querySelector(".mobile-menu-btn");
        const navDesktop = document.querySelector(".nav-desktop");
        const servicesGrid = document.getElementById(
          "restoration-services-grid"
        );
        const loadingServicesEl = document.getElementById("loading-services");
        const noServicesEl = document.getElementById("no-services");

        function handleResponsiveLayout() {
          const isDesktop = window.innerWidth >= 768;
          if (navDesktop)
            navDesktop.style.display = isDesktop ? "flex" : "none";
          if (mobileMenuButton)
            mobileMenuButton.style.display = isDesktop ? "none" : "block";

          const gridColumns = isDesktop ? "repeat(3, 1fr)" : "repeat(1, 1fr)";
          document.querySelectorAll(".grid-3").forEach((el) => {
            // 푸터 그리드 포함
            el.style.gridTemplateColumns = gridColumns;
          });
          if (servicesGrid && isDesktop) {
            // 서비스 그리드만 별도 처리 (동적 생성되므로)
            servicesGrid.style.gridTemplateColumns = "repeat(3, 1fr)";
          } else if (servicesGrid) {
            servicesGrid.style.gridTemplateColumns = "repeat(1, 1fr)";
          }
        }

        handleResponsiveLayout();
        window.addEventListener("resize", handleResponsiveLayout);

        // 복원 서비스 목록 로드
        fetch("/api/restoration/services")
          .then((response) => response.json())
          .then((data) => {
            if (loadingServicesEl) loadingServicesEl.style.display = "none";
            if (data.success && data.services && data.services.length > 0) {
              data.services.forEach((service) => {
                if (!service.is_active) return; // 비활성 서비스는 표시 안함

                const card = document.createElement("div");
                card.className = "restoration-card";

                const imagesDiv = document.createElement("div");
                imagesDiv.className = "restoration-images";

                const beforeImageDiv = document.createElement("div");
                beforeImageDiv.className = "restoration-image";
                const beforeImg = document.createElement("img");
                beforeImg.src =
                  service.before_image ||
                  "https://via.placeholder.com/300x200/e0e0e0/969696?text=Before";
                beforeImg.alt = `${service.name} 복원 전`;
                const beforeLabel = document.createElement("span");
                beforeLabel.className = "image-label";
                beforeLabel.textContent = "전";
                beforeImageDiv.appendChild(beforeImg);
                beforeImageDiv.appendChild(beforeLabel);

                const afterImageDiv = document.createElement("div");
                afterImageDiv.className = "restoration-image";
                const afterImg = document.createElement("img");
                afterImg.src =
                  service.after_image ||
                  "https://via.placeholder.com/300x200/d1fae5/059669?text=After";
                afterImg.alt = `${service.name} 복원 후`;
                const afterLabel = document.createElement("span");
                afterLabel.className = "image-label";
                afterLabel.textContent = "후";
                afterImageDiv.appendChild(afterImg);
                afterImageDiv.appendChild(afterLabel);

                imagesDiv.appendChild(beforeImageDiv);
                imagesDiv.appendChild(afterImageDiv);

                const detailsDiv = document.createElement("div");
                detailsDiv.className = "restoration-details";

                const titleH3 = document.createElement("h3");
                titleH3.textContent = service.name;

                const priceP = document.createElement("p");
                priceP.innerHTML = `가격: <strong>${Number(
                  service.price
                ).toLocaleString()}원</strong>`;

                const daysP = document.createElement("p");
                daysP.innerHTML = `소요기간: <strong>${service.estimated_days}일</strong>`;

                const descriptionP = document.createElement("p");
                descriptionP.className = "description";
                descriptionP.textContent = service.description;

                detailsDiv.appendChild(titleH3);
                detailsDiv.appendChild(priceP);
                detailsDiv.appendChild(daysP);
                detailsDiv.appendChild(descriptionP);

                card.appendChild(imagesDiv);
                card.appendChild(detailsDiv);

                if (servicesGrid) servicesGrid.appendChild(card);
              });
              handleResponsiveLayout(); // 동적 생성 후 레이아웃 재조정
            } else if (data.services && data.services.length === 0) {
              if (noServicesEl) noServicesEl.style.display = "block";
            } else {
              if (servicesGrid)
                servicesGrid.innerHTML =
                  '<p style="color: #dc2626; text-align:center; padding: 20px;">복원 서비스 목록을 불러오는데 실패했습니다.</p>';
            }
          })
          .catch((error) => {
            console.error("Error fetching restoration services:", error);
            if (loadingServicesEl) loadingServicesEl.style.display = "none";
            if (servicesGrid)
              servicesGrid.innerHTML =
                '<p style="color: #dc2626; text-align:center; padding: 20px;">복원 서비스 목록 로드 중 오류 발생.</p>';
          });
      });
    </script>
  </body>
</html>
